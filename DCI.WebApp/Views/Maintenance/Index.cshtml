@using Newtonsoft.Json;
@using DCI.Core.Common;
@using DCI.Models.ViewModel;

<link href="~/css/DCIcustom.css" rel="stylesheet" />

@{
	var modulePageAccess = Context.Session.GetString("ModulePageAccess");
	var moduleList = JsonConvert.DeserializeObject<List<ModuleInRoleViewModel>>(modulePageAccess ?? "[]") ?? new List<ModuleInRoleViewModel>();

	if (modulePageAccess == null)
	{
		<script>
			$.ajax({
				type: 'POST',
				url: '@Url.Action("Logout", "Account")',
				success: function (response) {

					Swal.fire({
						text: "Your session has timed out. Please log in again.",
						icon: "info",
						confirmButtonText: "Ok"
					}).then((result) => {
						window.location.href = '/Account/Logout';
					});
				},
				error: function () {
					Swal.fire({
						text: "An error occurred. Please try again.",
						icon: "error"
					});
				}
			})
		</script>
	}
}

<div class="container-fluid">
	<div class="spinner-overlay">
		<div class="spinner-border text-light" role="status">
			<span class="visually-hidden">Loading...</span>
		</div>
	</div>

	<div class="col-12 p0">
		<h6 class="m-0 font-weight-bold text-gray-800">Administration</h6>
		<hr>
	</div>
	<div class="col-12 p0">
		<ul class="breadcrumb">
			<li><a href="~/Home/Index">Dashboard</a></li>
			<li>Administration</li>
		</ul>
	</div>
	<!-- Content Row -->
	<div class="row">
		@foreach (var module in moduleList)
		{
			@if (module.ModulePageId == (int)EnumModulePage.Form201)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/EmployeeList/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Employee List</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-gears fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			}

			@if (module.ModulePageId == (int)EnumModulePage.UserManagement)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/UserEmployee/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">User Management</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-users fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			}
			@if (module.ModulePageId == (int)EnumModulePage.Department)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/Department/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Departments</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-network-wired fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			}
			@* @if (module.ModulePageId == (int)EnumModulePage.Section)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/Section/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Section</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-newspaper fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			} *@
		
			@if (module.ModulePageId == (int)EnumModulePage.DocumentType)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/DocumentType/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Document Type</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-tags fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			}
			@if (module.ModulePageId == (int)EnumModulePage.UserRole)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/UserRole/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">User Role</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-sitemap fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			}
			@if (module.ModulePageId == (int)EnumModulePage.AuditTrail)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/ActivityLog/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Audit Trail</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-gears fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			}
			@if (module.ModulePageId == (int)EnumModulePage.Announcement)
			{
				<div class="col-xl-3 col-sm-6 mb-4">
					<a href="~/Maintenance/Announcement/">
						<div class="card cardHover shadow h-100 py-2">
							<div class="card-body" style="padding: 1.25rem;">
								<div class="row no-gutters align-items-center">
									<div class="col mr-2">
										<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Announcement</div>
									</div>
									<div class="col-2">
										<i class="fa-solid fa-gears fa-2x text-gray-300"></i>
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>
			}


		}
	</div>
</div>
@section scripts {
	<script type="text/javascript">
		$('.spinner-overlay').show();

		setTimeout(() => {
			$('.spinner-overlay').hide();
		}, 200);

	</script>
}