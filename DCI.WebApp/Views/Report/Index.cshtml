@model DCI.Models.ViewModel.ReportGraphsDataViewModel
@using System.Text.Json



<div class="container-fluid">

    <div class="row">
        <div class="col-md-7 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">      
                    <canvas id="graphEmployeeDept" style="display: block; box-sizing: border-box; height: 300px; width: 696px;"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-5 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                 
                    <canvas id="graphEmployeeStatus"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="row">

    </div>
    <br/>
    <div class="row">
        <div class="list-group">
            <button type="button" class="list-group-item list-group-item-action">
                <a href="/Report/MasterList/"><i class='fa-solid fa-file'></i> Employee Master List</a>
            </button>     

            <button type="button" class="list-group-item list-group-item-action">
             
                <a asp-controller="Report" asp-action="Attendance" asp-route-id="0"><i class='fa-solid fa-file'></i> Attendance Summary Report</a>
            </button>
        
            <button type="button" class="list-group-item list-group-item-action">
                <a href="/Report/LeaveList/"><i class='fa-solid fa-file'></i> Leave Balance Report</a>
            </button>

            <button type="button" class="list-group-item list-group-item-action">       
                <a asp-controller="Report" asp-action="DTRAdjustment" asp-route-id="0"><i class='fa-solid fa-file'></i> DTR Adjustment Summary Report</a>
            </button>

            <button type="button" class="list-group-item list-group-item-action">
                <a href="/Report/Undertime/"><i class='fa-solid fa-file'></i> Undertime Summary Report</a>
            </button>
            <button type="button" class="list-group-item list-group-item-action">
                <a href="/Report/Overtime/"><i class='fa-solid fa-file'></i> Overtime Request Summary Report</a>
            </button>
            <button type="button" class="list-group-item list-group-item-action">
                <a href="/Report/OvertimeReport/"><i class='fa-solid fa-file'></i> Employee Overtime Detail Report</a>
            </button>
            <button type="button" class="list-group-item list-group-item-action">         
                <a href="/Report/WFH/"><i class='fa-solid fa-file'></i> WFH Summary Report</a>
            </button>
        </div>
        <hr />


        <div style="display: flex; flex-direction: column; align-items: center; width: 100%; margin: auto;">   
           
            <div style="width: 60%; padding: 10px; margin-top: 20px;">              
            </div>
        </div>
    </div>

</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>
        document.addEventListener("DOMContentLoaded", function () {
        var ctx = document.getElementById('graphEmployeeStatus').getContext('2d');
        var statusData = @Html.Raw(JsonSerializer.Serialize(Model.StatusData));

        // Creating gradient colors for a smooth 2D look
        var graphGradient1 = ctx.createLinearGradient(0, 0, 0, 181);
        graphGradient1.addColorStop(0, 'rgba(54, 215, 232, 1)');
        graphGradient1.addColorStop(1, 'rgba(177, 148, 250, 1)');

        var graphGradient2 = ctx.createLinearGradient(0, 0, 0, 50);
        graphGradient2.addColorStop(0, 'rgba(255, 191, 150, 1)');
        graphGradient2.addColorStop(1, 'rgba(254, 112, 150, 1)');

        var graphGradient3 = ctx.createLinearGradient(0, 0, 0, 300);
        graphGradient3.addColorStop(0, 'rgba(6, 185, 157, 1)');
        graphGradient3.addColorStop(1, 'rgba(132, 217, 210, 1)');

        // Assigning gradient colors dynamically
        var colors = [graphGradient1, graphGradient2, graphGradient3];
        var backgroundColors = statusData.map((item, index) => colors[index % colors.length]);

        // Chart.js Doughnut Chart
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: statusData.map(item => item.Status),
                datasets: [{
                    label: 'Employee Status',
                    data: statusData.map(item => item.Count),
                    backgroundColor: backgroundColors,
                    hoverBackgroundColor: backgroundColors,
                    borderColor: 'white',
                    borderWidth: 2
                }]
            },
            options: {
                cutout: '50%', // Adjusts the inner radius for the doughnut shape
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            boxWidth: 12,
                            padding: 15
                        }
                    }
                },
                animation: {
                    animateRotate: true,
                    animateScale: false
                }
            }
        });
    });

    document.addEventListener("DOMContentLoaded", function () {
        var ctx = document.getElementById('graphEmployeeDept').getContext('2d');
        var typeData = @Html.Raw(JsonSerializer.Serialize(Model.TypeData));

        // Create gradient colors for a 2D effect
        var graphGradient1 = ctx.createLinearGradient(0, 0, 0, 400);
        graphGradient1.addColorStop(0, 'rgba(54, 162, 235, 1)');
        graphGradient1.addColorStop(1, 'rgba(54, 162, 235, 0.5)');

        var graphGradient2 = ctx.createLinearGradient(0, 0, 0, 400);
        graphGradient2.addColorStop(0, 'rgba(255, 99, 132, 1)');
        graphGradient2.addColorStop(1, 'rgba(255, 99, 132, 0.5)');

        var graphGradient3 = ctx.createLinearGradient(0, 0, 0, 400);
        graphGradient3.addColorStop(0, 'rgba(255, 206, 86, 1)');
        graphGradient3.addColorStop(1, 'rgba(255, 206, 86, 0.5)');

        var graphGradient4 = ctx.createLinearGradient(0, 0, 0, 400);
        graphGradient4.addColorStop(0, 'rgba(75, 192, 192, 1)');
        graphGradient4.addColorStop(1, 'rgba(75, 192, 192, 0.5)');

        var graphGradient5 = ctx.createLinearGradient(0, 0, 0, 400);
        graphGradient5.addColorStop(0, 'rgba(153, 102, 255, 1)');
        graphGradient5.addColorStop(1, 'rgba(153, 102, 255, 0.5)');

        // Assigning gradients dynamically
        var gradients = [graphGradient1, graphGradient2, graphGradient3, graphGradient4, graphGradient5];
        var colors = typeData.map((_, index) => gradients[index % gradients.length]);

        var chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: typeData.map(item => item.Status),
                datasets: [{
                    label: 'Employee',
                    data: typeData.map(item => item.Count),
                    backgroundColor: colors,
                    borderColor: 'rgba(0, 0, 0, 0.1)', // Slight border for a 2D look
                    borderWidth: 1,
                    borderRadius: 8, // Slight rounding for a modern look
                    barThickness: 40, // Adjust bar thickness
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false // Hide legend for a clean look
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false // Hide x-axis grid lines for a clean look
                        }
                    },
                    y: {
                        beginAtZero: true,
                        grid: {
                            borderDash: [5, 5] // Dotted grid lines for a modern feel
                        }
                    }
                }
            }
        });
    });





</script>