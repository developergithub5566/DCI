@model IEnumerable<DCI.Models.ViewModel.HomePageViewModel>

	<link href="~/css/DCIcustom.css" rel="stylesheet" />


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
</head>

@{
	var modulePageAccess = Context.Session.GetString("ModulePageAccess");

	if (modulePageAccess == null)
	{
		<script>
			$.ajax({
				type: 'POST',
				url: '@Url.Action("Logout", "Account")',
				success: function (response) {

					Swal.fire({
						text: "Your session has timed out. Please log in again.",
						icon: "info",
						confirmButtonText: "Ok"
					}).then((result) => {
						window.location.href = '/Account/Logout';
					});
				},
				error: function () {
					Swal.fire({
						text: "An error occurred. Please try again.",
						icon: "error"
					});
				}
			})
		</script>
	}	
}

<div class="container-fluid">
	
<div class="spinner-overlay">
    <div class="spinner-border text-light" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>


	<!-- Content Row -->
	<div class="row">
		<div class="col-12">
			<h6 class="m-0 font-weight-bold text-gray-800">Dashboard</h6>
			<hr>
		</div>

		@foreach(var x in Model)
		{
			<div class="col-xl-3 col-lg-4 col-md-4 col-sm-6 mb-4">
				<div class="card shadow h-100 py-2">
					<a asp-controller="Document" asp-action="Index" asp-route-doctypeid="@x.DocTypeId">
					<div class="card-body" style="padding: 1.25rem; -webkit-box-flex:1; -ms-flex: 1 1 auto">
						<div class="row no-gutters align-items-center">
							<div class="col mr-2">					
								<div class="text-xs font-weight-bold text-primary text-uppercase mb-1">								
										@x.DocumentType									
								</div>
								<div class="h5 mb-0 font-weight-bold text-gray-800">@x.TotalCount</div>
							</div>
							<div class="col-auto">
								<i class="fa-solid fa-file fa-2x text-gray-500"></i>
							</div>
						</div>
					</div>
					</a>
				</div>
			</div>
		}		
		
	</div>

</div>
	@section scripts {
			<script type="text/javascript">				 
								$('.spinner-overlay').show();

								setTimeout(() => {
									 $('.spinner-overlay').hide();
								}, 200);
						 
			</script>
		}
