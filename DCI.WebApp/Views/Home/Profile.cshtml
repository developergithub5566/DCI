@model DCI.Models.ViewModel.UserViewModel

<div class="card shadow">
	<div class="card-header py-3">
		<h5 class="text-gray-800 mb0"></h5>
	</div>
	<div class="card-body">
		<div class="cardTitle">
			<label>My Profile</label>
			<p>Manage and protect your account</p>
		</div>
		<form id="createForm">
			<input type="hidden" id="UserId" name="UserId" value="@Model.UserId">
			<input type="hidden" id="RoleId" name="RoleId" value="@Model.RoleId">
			<div class="form-group">
				<label class="frmText">Email Address:</label>
				<input type="text" class="form-control frmField" id="Email" name="Email" value="@Model.Email" readonly>
				<!--<a href="http://202.57.47.34/DCI-ESS-STG/account/profile/change-email" class="btnChangeEmail">Change Email Address?</a>-->
			</div>

			<div class="form-group">


				<label class="frmText">First Name:</label>
				<input type="text" class="form-control frmField" id="Firstname" name="Firstname" value="@Model.Firstname">
			</div>

			<div class="form-group">
				<label class="frmText">Middle Name:</label>
				<input type="text" class="form-control frmField" id="Middlename" name="Middlename" value="@Model.Middlename">
			</div>

			<div class="form-group">
				<label class="frmText">Last Name:</label>
				<input type="text" class="form-control frmField" id="Lastname" name="Lastname" value="@Model.Lastname">
			</div>

			<div class="form-group">
				<label class="frmText">Gender:</label>
				<select class="form-control frmField" name="GENDER">
					<option value="MALE" selected>Male</option>
					<option value="FEMALE">Female</option>
				</select>
			</div>
			<div class="form-group mt30">
				<button type="submit" class="btn btn-primary" onclick="Save()"><small>Update</small></button>
				@* 	<a href="~/Home/" class="btn btnSecondary pr30 pl30 pt10 pb10"><small>Back</small></a> *@
				<a asp-controller="Home" asp-action="Index" class="btn btn-secondary"><small>Back</small></a>
			</div>
		</form>
	</div>


	@section scripts {
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.5.2/bootbox.min.js"></script>
		<script src="https://cdn.datatables.net/2.1.2/js/dataTables.js"></script>


		<script type="text/javascript">

			var js = jQuery.noConflict(true);

			js(document).ready(function () {

		
			});

			function Save() {
				event.preventDefault();
				//var formData = $(this).serialize();
				const formData = new Object();
				formData.UserId = $('#UserId').val();
				formData.RoleId = $('#RoleId').val();
				formData.Email = $('#Email').val();
				formData.Firstname = $('#Firstname').val();
				formData.Middlename = $('#Middlename').val();
				formData.Lastname = $('#Lastname').val();

		
				bootbox.confirm('Are you sure you want to save this record?', function (result) {
					if (result) {

						$.ajax({
							type: 'POST',
							url: '@Url.Action("SaveUser", "Maintenance")',
							data: formData,
							success: function (response) {
								if (response.success) {
									bootbox.alert(response.message, function () {
										location.reload();
									});
								} else {
									bootbox.alert(response.message);
								}
							},
							error: function () {
								bootbox.alert('An error occurred. Please try again.');
							}
						});
					}
				});
			}
		</script>
	}
